<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Olive Energy Meter</title>
  <link rel="icon" type="image/png" href="logo.png">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <style>
    * {
      padding: 0;
      margin: 0;
    }

    body {
      background: rgb(201, 195, 195);
    }

    .navbar-nav {
    display: flex;
    justify-content: space-between;
    width: 100%;
  }
  .nav-item {
    padding: 0px 30px;
  }
        #expandableDiv {
         
            transition: all 0.5s ease;
        }
        .expanded {
          position: fixed;
            top: 100px;
            left: 0;
            width: 90%;
            height: 100%;
            z-index: 1000;
        }
    .breadcrumb-item a {
      color: inherit;
      text-decoration: inherit;
    }

    .footer {
      position: relative;
      top:40px;
      bottom: 0;
      left: 0;
      /* Make sure the footer spans the full width */
      width: 100%;
      /* Ensure the footer spans the full width */
      display: flex;
      justify-content: center;
      align-items: center;
      /* Center vertically */
      background-color: #333;
      /* Just for visualization */
      color: white;
      /* Just for visualization */
    }
    #logoutCard1 {
      position: absolute;
      top: 60px; /* Adjust this value as needed */
      right: 0;
      background-color: #d1cbcb;
      border: 1px solid #ccc;
      padding: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
      z-index: 1000; /* Ensure the card appears above other elements */
    }
    
  </style>
  <link rel="stylesheet" href="universal.css">
</head>

<body>
  <div class="con"></div>
  <div class="container-fluid main">
    <div class="container-fluid nav-section mb-5">
      <nav class="navbar navbar-expand-sm  fixed-top bg-info">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">
            <img src="logo.png" alt="Avatar Logo" style="width:40px;" class="rounded-pill">
          </a>
          <h5 class="nav-title text-muted mt-2">Olive Energy Meter</h5>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mynavbar">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse " id="mynavbar">
            <ul class="navbar-nav me-auto">
             
             
            </ul>
            <div >
              

              <form id="searchForm" class="d-flex">
                  <input id="searchInput"  list="page"  class="form-control me-2" type="text" placeholder="Search">
                  <datalist id="page">
                    <option value="home">
                    <option value="project">
                    <option value="user">
                 
                  </datalist>
                  <button id="searchButton" class="btn btn-primary me-5" type="submit">Search</button>
              </form>
              <div id="searchResults"></div>
          </div>
            <div id="logoutIcon" style="cursor: pointer;">
              <i class="fa fa-sign-out text-muted" aria-hidden="true" style="font-size: 25px;"></i>
            </div>
          
            <!-- Logout confirmation card -->
            <div id="logoutCard1" style="display: none;">
              <i class="ms-5 fa fa-user text-primary " aria-hidden="true" style="font-size: 50px;"></i>
              <p class="text-dark">Are you sure<br> you  want to logout?</p>
              <button id="logOut" class="btn btn-danger text-white">Logout</button>
            </div>
          </div>
        </div>
      </nav>


    </div>
    <button onclick="scrollToTop()" id="scrollToTop"  class="btn btn-secondary" title="Go to top"><i class="fa fa-arrow-up" aria-hidden="true"></i></button>
    <div class="container-fluid main-section mt-5">
      <div class="row mt-5 pt-5 ps-3 ">
        <ul class="breadcrumb">
          

          <li class="breadcrumb-item"><button class="btn btn-primary" id="dashBoard"> Go to DashBoard </button></li>



        </ul>
      </div>

      <div class="row  w3-animate-zoom">
        <div class="col-lg-12 col-md-12 main-chart">
            <div class="row">
              <div class="col-lg-8 col-sm-12  p-1">
                <div class="bg-white p-3    border border-light border-3">
                    <div class="card  ">

                        <div class="card-body ">


                            <div id="chartonline"></div>

                        </div>
                    </div>
                </div>
            </div>
                <div class="col-lg-4 col-md-12 ">

                    <div class="row ">

                        <div class="col-lg-12 col-sm-12  p-1 w3-animate-zoom">
                            <div class="bg-white p-3    border border-light border-3">
                                <div class="card   expandable-card" id="expandCard">

                                    <div class="card-body ">


                                        <div id="chart"></div>

                                    </div>
                                </div>
                            </div>
                        </div>
                 
                    </div>
                </div>
              </div>
           

            
        </div>
     


    </div>

  </div>
  <div class="container-fluid">
    <div class="row d-flex justify-content-center">
     
    </div>
  </div>
  <!-- Offcanvas Bottom  -->
  
  <footer class="footer">
    <h5 class="footer-content">&copy;All Rights Reserved Olive IOT</h5>
  </footer>
</body>
<script src="search.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>













<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
<script type="text/javascript">
  var datesR = [
    { x: new Date('2023-01-01').getTime(), y: 1000000 },
    { x: new Date('2023-02-01').getTime(), y: 2000000 },
    { x: new Date('2023-03-01').getTime(), y: 1500000 },
    { x: new Date('2023-04-01').getTime(), y: 2500000 },
    { x: new Date('2023-05-01').getTime(), y: 3000000 }
  ];
  
  var datesY = [
    { x: new Date('2023-01-01').getTime(), y: 1100000 },
    { x: new Date('2023-02-01').getTime(), y: 2100000 },
    { x: new Date('2023-03-01').getTime(), y: 1600000 },
    { x: new Date('2023-04-01').getTime(), y: 2600000 },
    { x: new Date('2023-05-01').getTime(), y: 3100000 }
  ];
  
  var datesB = [
    { x: new Date('2023-01-01').getTime(), y: 1200000 },
    { x: new Date('2023-02-01').getTime(), y: 2200000 },
    { x: new Date('2023-03-01').getTime(), y: 1700000 },
    { x: new Date('2023-04-01').getTime(), y: 2700000 },
    { x: new Date('2023-05-01').getTime(), y: 3200000 }
  ];

  var options = {
    series: [
      {
        name: 'R Phase',
        data: datesR
      },
      {
        name: 'Y Phase',
        data: datesY
      },
      {
        name: 'B Phase',
        data: datesB
      }
    ],
    chart: {
      type: 'area',
      stacked: false,
      height: 350,
      zoom: {
        type: 'x',
        enabled: true,
        autoScaleYaxis: true
      },
      toolbar: {
        autoSelected: 'zoom'
      }
    },
    colors: [ '#0000FF', '#FFFF00','#FF0000'], // Blue, Yellow, Red
    dataLabels: {
      enabled: false
    },
    markers: {
      size: 0,
    },
    title: {
      text: 'Three Phase Voltage Monitoring',
      align: 'left'
    },
    fill: {
      type: 'gradient',
      gradient: {
        shadeIntensity: 1,
        inverseColors: false,
        opacityFrom: 0.5,
        opacityTo: 0,
        stops: [0, 90, 100]
      },
    },
    yaxis: {
      labels: {
        formatter: function (val) {
          return (val / 1000000).toFixed(0);
        },
      },
      title: {
        text: 'Voltage (in millions)'
      },
    },
    xaxis: {
      type: 'datetime',
    },
    tooltip: {
      shared: true,
      y: {
        formatter: function (val) {
          return (val / 1000000).toFixed(0);
        }
      }
    }
  };

  var chart = new ApexCharts(document.querySelector("#chartonline"), options);
  chart.render();
</script>







<script type="text/javascript">
  // Function to get the last two days' names
  function getLastTwoDays() {
    const daysOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
    const today = new Date();
    const yesterday = new Date(today);
    yesterday.setDate(today.getDate() - 1);

    return [
      daysOfWeek[yesterday.getDay()],
      daysOfWeek[today.getDay()]
    ];
  }

  const lastTwoDays = getLastTwoDays();

  var options = {
    series: [{
      name: 'Servings',
      data: [44, 55]
    }],
    annotations: {
      points: [{
        x: 'Production',
        seriesIndex: 0,
        label: {
          borderColor: '#775DD0',
          offsetY: 0,
          style: {
            color: '#fff',
            background: '#775DD0',
          },
          text: '',
        }
      }]
    },
    title: {
      text: 'Overall Production',
      align: 'left'
    },
    chart: {
      height: 350,
      type: 'bar',
    },
    plotOptions: {
      bar: {
        borderRadius: 10,
        columnWidth: '50%',
      }
    },
    dataLabels: {
      enabled: false
    },
    stroke: {
      width: 0
    },
    grid: {
      row: {
        colors: ['#fff', '#f2f2f2']
      }
    },
    xaxis: {
      labels: {
        rotate: -45
      },
      categories: lastTwoDays,
      tickPlacement: 'on'
    },
    yaxis: {
      title: {
        text: 'COST',
      },
    },
    fill: {
      type: 'gradient',
      gradient: {
        shade: 'light',
        type: "horizontal",
        shadeIntensity: 0.25,
        gradientToColors: undefined,
        inverseColors: true,
        opacityFrom: 0.85,
        opacityTo: 0.85,
        stops: [50, 0, 100]
      },
    }
  };

  var chart = new ApexCharts(document.querySelector("#chart"), options);
  chart.render();
</script>


<script type="text/javascript">
  var options = {
      series: [44, 55, 13, 33, 22], // Make sure the number of values matches the number of labels
      chart: {
          width: 380,
          type: 'donut',
      },
      title: {
      text: ' Production',
      align: 'left'
    },
      labels: ['March', 'April', 'May', 'June', 'July'], // Add this line for labels
      dataLabels: {
          enabled: false
      },
      responsive: [{
          breakpoint: 480,
          options: {
              chart: {
                  width: 200
              },
              legend: {
                  show: false
              }
          }
      }],
      legend: {
          show: true,
          position: 'bottom'
      }
  };

  var chart = new ApexCharts(document.querySelector("#piechart_3d"), options);
  chart.render();
</script>










<!-- 
<script type="module">




  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-analytics.js";
  //  import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-auth.js";
  // import { getDatabase,ref,onValue} from "https://www.gstatic.com/firebasejs/10.11.0/firebase-database.js"; 
  // import { getDatabase, ref, onValue } from "./firebase/database";
  import { getDatabase, ref, onChildAdded, orderByChild, onValue, remove } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-database.js";


  const firebaseConfig = {

    apiKey: "AIzaSyCaAt7YTQBOfXph8A7NtLwqayqsqQfPITY",
    authDomain: "three-phase-energy-meter.firebaseapp.com",
    projectId: "three-phase-energy-meter",
    storageBucket: "three-phase-energy-meter.appspot.com",
    messagingSenderId: "643707481883",
    appId: "1:643707481883:web:b442d0e444b6a849e06dbe",
    measurementId: "G-ZC6S4GQJD3"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const db = getDatabase(app);
  // const userId="OliveEnergy";


  // function addProject(projectName) {
  //     const projectsRef = ref(database, 'projects'); // Assuming 'projects' is the path in your database
  //     push(projectsRef, {
  //         name: projectName
  //     });
  // }


 


    // Refresh table

  

    // Add click event listener to the Refresh button
   

</script> -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-analytics.js";
  import { getAuth, signInWithEmailAndPassword,signOut} from "https://www.gstatic.com/firebasejs/10.11.0/firebase-auth.js";

  const firebaseConfig1 = {
      apiKey: "AIzaSyCaAt7YTQBOfXph8A7NtLwqayqsqQfPITY",
      authDomain: "three-phase-energy-meter.firebaseapp.com",
      projectId: "three-phase-energy-meter",
      storageBucket: "three-phase-energy-meter.appspot.com",
      messagingSenderId: "643707481883",
      appId: "1:643707481883:web:b442d0e444b6a849e06dbe",
      measurementId: "G-ZC6S4GQJD3"
  };

  // Initialize Firebase
  const app1 = initializeApp(firebaseConfig1);
  const analytics1 = getAnalytics(app1);
  console.log(app1);
  const auth = getAuth();

  // Get logout icon and card elements
const logoutIcon1 = document.getElementById('logoutIcon');
const logoutCard3 = document.getElementById('logoutCard1');


// Show the logout card when the logout icon is clicked
logoutIcon1.addEventListener('click', () => {
  if (logoutCard3.style.display === 'block') {
    logoutCard3.style.display = 'none';
  } else {
    logoutCard3.style.display = 'block';
  }
});



// Hide the logout card when the user clicks outside of it


// Logout when the logout button is clicked
document.getElementById('logOut').addEventListener('click', () => {
  const confirmLogout = confirm('Are you sure you want to logout?');
  if (confirmLogout) {
    signOutUser(); // Call the signOut function from auth.js
  }
});
function signOutUser() {
  signOut(auth).then(() => {
    // Sign-out successful.
    window.location.href = "index.html";
  }).catch((error) => {
    // An error happened.
    console.error(error.message);
  });
}

</script>


<script type="module">

 import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-analytics.js";
    //  import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-auth.js";
    import { getDatabase, ref, set , child, get} from "https://www.gstatic.com/firebasejs/10.11.0/firebase-database.js";

    const firebaseConfig = {

        apiKey: "AIzaSyCaAt7YTQBOfXph8A7NtLwqayqsqQfPITY",
        authDomain: "three-phase-energy-meter.firebaseapp.com",
        projectId: "three-phase-energy-meter",
        storageBucket: "three-phase-energy-meter.appspot.com",
        messagingSenderId: "643707481883",
        appId: "1:643707481883:web:b442d0e444b6a849e06dbe",
        measurementId: "G-ZC6S4GQJD3"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    // const db = getFirestore(app);
    var db = getDatabase(app);
    const urlParams = new URLSearchParams(window.location.search);
     window.projectName = urlParams.get('projectName');
    console.log(projectName)


  
document.getElementById("dashBoard").addEventListener('click',()=>{
   
    // console.log(pro_name);
    window.location.href = `userDashBoard.html?projectName=${encodeURIComponent(window.projectName)}`;



}
);
</script>
<script src="scrollTop.js"></script>
</html>